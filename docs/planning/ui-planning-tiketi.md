## 1. 서비스 목적 & 대상 사용자

### 1.1 서비스 목적
- 대규모 트래픽 상황에서도 **공정하고 안정적인 공연/콘서트 티켓 예매 경험** 제공
- 실시간 좌석/티켓 수량 상태를 WebSocket 으로 반영하여 **새로고침 없이 상태 변화 인지**
- 관리자에게는 **이벤트/좌석/예약/매출에 대한 운영 도구** 제공

### 1.2 주요 사용자 유형
- **일반 사용자 (User)**
  - 이메일/비밀번호로 로그인
  - 공연/콘서트 목록 탐색 및 검색
  - 좌석 기반/비좌석 기반 티켓 예매, 결제, 예약 내역 조회/취소
  - 공지/이벤트 관련 공지(News) 게시글 열람·작성(일반 글)
- **관리자 (Admin)**
  - 관리자 전용 대시보드 접근
  - 이벤트 생성/수정/삭제
  - 좌석 레이아웃 선택 또는 티켓 타입(등급/가격/수량) 설정
  - 전체 예약 목록 조회 및 상태 모니터링
  - 공지글(News) 상단 고정(공지사항) 설정

---

## 2. 핵심 유저 플로우

### 2.1 일반 사용자 플로우

1. **회원가입/로그인 플로우**
   - [회원가입] 화면에서 이메일/비밀번호/이름 입력 → 계정 생성
   - 회원가입 완료 후 자동 로그인 → 메인 홈으로 이동
   - [로그인] 화면에서 이메일/비밀번호 입력 → 성공 시:
     - `role === 'admin'` → `/admin` (관리자 대시보드)
     - 그 외 → `/` (일반 홈)

2. **이벤트 탐색/검색 플로우**
   - 메인 홈(`/`)에서 이벤트 카드 목록 확인
   - 헤더 검색창에서 공연명 검색 → `/search?q=검색어` 이동
   - 검색 결과에서 상태 필터(on_sale/upcoming/ended/cancelled)로 재필터링
   - 카드 클릭 시 `/events/:id` 상세로 이동

3. **비좌석형 이벤트 예매 플로우**
   - `/events/:id`에서 이벤트 상세 및 티켓 타입(일반, VIP 등) 확인
   - 티켓 수량 선택 → 합계 금액/수량 확인
   - `좌석 레이아웃 없음(seat_layout_id 없음)` → "예매하기" 버튼 클릭
   - 예약 생성 후 → `/my-reservations` 목록으로 이동 (또는 이후 결제 플로우 확장)

4. **좌석형 이벤트 예매 플로우**
   - `/events/:id` 진입 시 이벤트에 `seat_layout_id`가 있으면 "좌석 선택" 버튼 노출
   - 버튼 클릭 → `/events/:eventId/seats` 좌석 선택 화면 이동
   - 섹션/구역·행·좌석 단위로 좌석 클릭 → 선택 상태 변경
   - 선택한 좌석 목록/총 금액 확인 후 "결제하기" 클릭 → `/payment/:reservationId`
   - 예약 만료 타이머 내에서 결제 수단 선택 후 결제 처리(Mock)
   - 성공 시 `/payment-success/:reservationId` → 완료 UI, 이후 `/my-reservations` 안내

5. **예약 내역 조회/취소 플로우**
   - 헤더 "나의 예매" → `/my-reservations`
   - 예약 카드 클릭 → `/reservations/:id` 상세 화면
   - "예매 취소" 버튼을 통해 취소(가능 상태인 경우에만) → 목록으로 리다이렉트

6. **대기열 플로우 (혼잡 이벤트)**
   - `/events/:id` 진입 시 `/queue/check/:eventId` 로 사용자의 대기열 상태 확인
   - 대기 중인 경우 → `WaitingRoomModal` 모달 오버레이 표시
   - WebSocket + 폴링으로 예상 대기 시간, 내 순번, 총 대기 인원 표시
   - 입장 허용 시 → 모달 자동 닫힘, 최신 이벤트 정보 로드 후 예매 진행 가능

7. **News 게시글 플로우**
   - 헤더 "News" → `/news`
   - 리스트에서 제목 클릭 → `/news/:id` 상세
   - 로그인한 사용자는 `/news`에서 글 작성(제목/내용) 가능
   - 본인 글은 `/news/:id`에서 수정/삭제 가능
   - 관리자 계정은 "공지(상단 고정)" 체크박스로 공지사항 설정 가능

### 2.2 관리자 플로우

1. **관리자 로그인 플로우**
   - 관리자 계정으로 로그인 → `/admin` 자동 리다이렉트
   - 상단 헤더에도 "관리자" 메뉴 노출

2. **관리자 대시보드 플로우**
   - `/admin` 진입 시 요약 통계 표시
     - 전체 이벤트 수, 전체 예매 수, 총 매출, 오늘 예매 수
     - 최근 예매 목록(사용자/이벤트/금액/상태)
   - 이벤트/예매 관리 페이지로 바로 이동 가능한 버튼 제공

3. **이벤트 관리 플로우**
   - `/admin/events`에서 전체 이벤트 목록 조회(상태 필터 탭)
   - "새 이벤트 만들기" 버튼 → `/admin/events/new`
     - 기본 정보 입력(제목, 설명, 공연장/주소, 일시, 판매 기간, 아티스트, 포스터)
     - 좌석 레이아웃 사용 여부 선택
       - 사용 시: 존재하는 레이아웃 목록 중 선택, 섹션/가격/좌석 수 미리보기
       - 미사용 시: 티켓 타입(등급/가격/수량/설명) N개 등록
   - 이벤트 카드에서 "수정" 클릭 → `/admin/events/edit/:id`
     - 이벤트 기본 정보 수정
     - 필요 시 "이벤트 취소" 처리(전체 예약 취소 포함)
   - 이벤트 카드에서 "삭제" 버튼 → 이벤트 삭제(개발환경/운영정책에 따라 제한 가능)

4. **예약 관리 플로우**
   - `/admin/reservations`에서 전체 예매 목록 조회
   - 상태 필터(전체/대기/확정/취소)로 필터링
   - 각 예약 행에서 사용자 정보, 이벤트, 금액, 예매/결제 상태 확인

---

## 3. 화면 목록 & 정보 구조

### 3.1 글로벌 구조

- **공통 헤더 (`Header`)**
  - 로고(홈 링크)
  - 검색창(공연명 검색 → `/search?q=`)
  - 상단 내비게이션
    - `News`
    - 로그인/회원가입 또는 사용자 이름/로그아웃/나의 예매
    - 관리자일 경우 `관리자` 메뉴 노출

- **라우팅 구조 (React Router 기준)**
  - `/` – 홈(이벤트 목록)
  - `/search` – 검색 결과
  - `/news` – 뉴스 목록/작성
  - `/news/:id` – 뉴스 상세/수정/삭제
  - `/login` – 로그인
  - `/register` – 회원가입
  - `/events/:id` – 이벤트 상세
  - `/events/:eventId/seats` – 좌석 선택
  - `/my-reservations` – 나의 예매 목록
  - `/reservations/:id` – 예매 상세
  - `/payment/:reservationId` – 결제
  - `/payment-success/:reservationId` – 결제 완료
  - `/admin` – 관리자 대시보드
  - `/admin/events` – 관리자 이벤트 목록
  - `/admin/events/new` – 이벤트 생성 폼
  - `/admin/events/edit/:id` – 이벤트 수정 폼
  - `/admin/reservations` – 관리자 예매 관리

---

## 4. 화면별 UI/UX 요구사항

### 4.1 공통 요소

- **로딩 상태**
  - 주요 데이터 로드 시 `spinner` 컴포넌트 사용 (페이지 중앙 혹은 카드 영역)
- **알림/에러 상태**
  - 성공/에러 메시지는 `alert alert-success` / `alert alert-error` 클래스로 표시
  - 일부 동작은 `window.alert` + 페이지 내 alert 병행
- **빈 상태 (Empty State)**
  - 목록 데이터가 없을 때:
    - 간단한 아이콘/문구 + 다음 행동 유도 버튼(예: "이벤트 보러가기", "새 이벤트 만들기")

---

### 4.2 홈 페이지 (`/`, `Home`)

- **목표**
  - 현재/예정 이벤트를 한눈에 보여주고, 상태별 필터로 탐색을 돕는다.
  - 상단 히어로 슬라이더로 브랜드 톤과 핵심 메시지 전달.

- **구성**
  - 상단 히어로 배너 슬라이더
    - 3개의 슬라이드(티켓 오픈, 실시간 좌석, 얼리버드 혜택 등)
    - 자동 롤링(4초), 좌우 화살표 및 하단 점(인디케이터)
  - 상태 필터 탭
    - `판매 중 / 오픈 예정 / 판매 종료 / 취소됨 / 전체`
    - 선택된 필터에 따라 이벤트 리스트 재조회
  - 이벤트 카드 그리드 (`EventCard`)
    - 포스터 이미지/플레이스홀더
    - 상태 뱃지(판매 중, 오픈 예정, 매진, 종료, 취소)
    - 공연장, 날짜, 가격 범위
    - 판매 중/오픈 예정인 경우 상단에 카운트다운 표시

- **상태**
  - `loading == true` → 중앙 스피너
  - `error 존재` → 상단 경고 박스
  - 이벤트 0개 → "이벤트가 없습니다" 문구

---

### 4.3 검색 결과 페이지 (`/search`, `Search`)

- **목표**
  - 키워드 기반으로 공연을 빠르게 찾고, 상태 필터로 결과를 정교하게 줄인다.

- **구성**
  - 상단 영역
    - 타이틀 "검색 결과"
    - 검색어가 있을 경우 `"검색어"에 대한 검색 결과입니다` 보조 문구
  - 좌측 사이드바 필터
    - 전체 / 판매 중 / 오픈 예정 / 판매 종료 / 취소됨
  - 우측 결과 영역
    - 로딩, 에러, 결과 없음, 결과 목록 UI
    - 결과 없음 시: 검색어 기반 안내 문구와 다른 검색어 시도 권장 문구

- **상태**
  - 필터/검색어 변경 시마다 로딩 → 결과 갱신
  - 조용한 자동 새로고침(카운트다운 만료 시 리스트 재조회)

---

### 4.4 이벤트 상세 페이지 (`/events/:id`, `EventDetail`)

- **목표**
  - 이벤트에 대한 상세 정보(장소, 일시, 판매 기간, 설명, 티켓/좌석 상태)를 제공
  - 이벤트 상태/시간에 따라 **행동 버튼(예매/좌석 선택)**을 명확히 안내
  - 혼잡 시 대기열 모달 노출

- **구성**
  - 상단 WebSocket 연결 상태 배너 (`ConnectionStatus`)
    - 재연결 중/연결 끊김일 때만 상단에 얇은 경고 바 표시
  - 히어로 영역
    - 포스터 이미지 또는 플레이스홀더
    - 이벤트 제목
    - 카운트다운 칩(판매 시작까지 / 판매 종료까지)
    - 주요 CTA 버튼
      - 상태/좌석 여부에 따라 텍스트 및 disabled 상태 결정
      - 예: "예매하기", "좌석 선택", "판매 종료", "취소됨"
    - 장소/주소/공연 일시/판매 기간 정보
    - 이벤트 설명(있을 경우)
  - 본문 영역
    - 에러/성공 메시지 alert
    - **비좌석형 이벤트**
      - 티켓 타입 카드 리스트 (이름, 설명, 가격, 남은/전체 수량)
      - 수량 증감 버튼(최소 0, 재고 초과 불가)
      - 선택한 수량 합계/가격은 CTA 영역에서 반영
    - 좌석형 이벤트
      - 이 화면에서는 좌석 모양을 직접 렌더링하지 않고, 상단 CTA를 통한 `SeatSelection` 페이지로 이동
  - 대기열 모달 (`WaitingRoomModal`)
    - 대기열에 있는 경우에만 전체 오버레이로 노출
    - 내 순번, 예상 대기 시간, 전체 대기 인원, 현재 접속 중 사용자 수 등 표시
    - "대기열 나가기" 버튼 제공

---

### 4.5 좌석 선택 페이지 (`/events/:eventId/seats`, `SeatSelection`)

- **목표**
  - 섹션/행/좌석 단위의 좌석 배치를 시각적으로 보여주고, 실시간 좌석 상태를 반영하여 선택/해제
  - 예매 가능한 최대 좌석 수를 제한하고, 상태(선택/예약/잠금)를 즉시 피드백

- **구성**
  - 상단 헤더
    - 공연 제목
    - 안내 문구: "원하는 좌석을 클릭하여 선택하세요 (최대 N석)"
    - "이벤트로 돌아가기" 버튼
  - 무대 영역
    - 상단에 "STAGE" 레이블
  - 섹션/구역 + 좌석 그리드
    - 좌측부터 섹션 단위로 배치
    - 각 섹션별 제목: 섹션 이름 + 가격(원)
    - 행(row)별 레이블 + 좌석 버튼들
    - 좌석 버튼 색상/스타일은 좌석 상태(선택/예약/잠금/빈자리)에 따라 다르게 표현
  - 하단 요약 패널
    - 좌측: 범례(범위별 컬러와 의미)
    - 중앙: 선택된 좌석 목록(태그 형태, 개별 삭제 가능)
    - 우측: 총 결제 금액 + "결제하기" 버튼

- **상태/제약**
  - `loading` → "좌석 정보를 불러오는 중" 텍스트
  - `error` → 에러 메시지 + "이벤트로 돌아가기" 버튼
  - 레이아웃 없음 → "이 이벤트는 좌석 선택이 불가능합니다" 안내
  - 선택 좌석 0개 시 결제 버튼 disabled
  - 예약/잠금 상태 좌석 클릭 시 상태 메시지를 alert 로 안내

---

### 4.6 결제 페이지 (`/payment/:reservationId`, `Payment`)

- **목표**
  - 예약 정보와 남은 결제 시간을 명확히 보여주고, 결제 수단을 선택하여 결제를 완료하도록 유도

- **구성**
  - 상단 타이머 카드
    - 남은 시간(분:초)
    - "시간 내 결제하지 않으면 좌석이 자동 취소됩니다" 안내
    - 남은 시간이 60초 미만이면 경고 스타일 적용
  - 예약 정보 카드
    - 이벤트 제목/공연장/공연 일시
    - 선택 좌석 목록(좌석명 + 가격)
    - 총 결제 금액
  - 결제 수단 선택 섹션
    - 네이버페이/카카오페이/계좌이체 등
    - 라디오 버튼 + 아이콘 + 라벨
    - 선택 시 카드 강조
  - 하단 "결제하기" 버튼
    - 비활성화 조건: 결제 수단 미선택, 처리 중일 때
    - 버튼 텍스트: `{총 결제 금액}원 결제하기` 형태

- **상태**
  - 예약 정보 로딩/에러/미존재 시 각각 안내
  - 예약 만료 또는 이미 결제 완료인 경우 → 홈/성공 페이지로 리다이렉트

---

### 4.7 결제 완료 페이지 (`/payment-success/:reservationId`, `PaymentSuccess`)

- **목표**
  - 결제 성공 시 사용자에게 확신을 주고, 이후 행동(예매 내역 확인/홈으로) 유도

- **구성**
  - 상단 성공 아이콘(체크마크 원형)
  - 메시지
    - "결제가 완료되었습니다"
    - "예약이 정상적으로 처리되었습니다"
  - 예약 정보
    - 예약 번호
    - 이벤트 제목/공연장/공연 일시
    - 좌석 목록
    - 결제 수단/금액
  - 행동 버튼
    - "내 예약 확인" → `/my-reservations`
    - "홈으로 가기" → `/`
  - 안내 박스
    - "예약 확인 메일" 관련 안내 (현재는 목업)

---

### 4.8 나의 예매 목록 (`/my-reservations`, `MyReservations`)

- **목표**
  - 사용자의 전체 예매 내역을 한눈에 보여주고, 각 예매의 상태/결제 상태를 빠르게 파악

- **구성**
  - 제목 "나의 예매"
  - 에러 alert (데이터 로드 실패 시)
  - 예매 카드 리스트
    - 이벤트 제목/예매 번호
    - 공연장, 공연일시, 예매일시
    - 예매 상태, 결제 상태 뱃지
    - 예매 아이템(티켓 타입/수량/금액) 목록
    - 총 결제 금액
    - 카드 전체가 `/reservations/:id`로 링크
  - 빈 상태
    - "예매 내역이 없습니다" 문구
    - "이벤트 보러가기" 버튼

---

### 4.9 예매 상세 (`/reservations/:id`, `ReservationDetail`)

- **목표**
  - 단일 예매의 상세 정보(이벤트/장소/시간/티켓/금액)를 제공하고, 예매 취소 여부를 판단하게 한다.

- **구성**
  - 상단 헤더
    - 제목 "예매 상세"
    - 예매 취소 가능 시 "예매 취소" 버튼
  - 예매 정보 섹션
    - 예매 번호/예매 시간/예매 상태/결제 상태
  - 이벤트 정보 섹션
    - 이벤트 제목/장소/주소/공연 일시
  - 티켓 정보 테이블
    - 티켓 종류/수량/단가/금액
  - 총 결제 금액 영역
  - 하단 버튼
    - "목록으로" → `/my-reservations`

- **상태**
  - 취소 불가 조건: 이미 취소, 환불 완료 등
  - 취소 버튼 클릭 시 confirm → 성공 후 목록으로 이동

---

### 4.10 로그인 / 회원가입 (`/login`, `/register`)

- **목표**
  - 인증 절차를 간단하고 명확하게 제공

- **구성**
  - 공통 스타일 카드 레이아웃 (`Auth.css`)
  - 로그인
    - 이메일/비밀번호 입력
    - 에러 메시지(로그인 실패 시)
    - "계정이 없으신가요? 회원가입" 링크
    - 데모 계정 정보(관리자 계정) 안내
  - 회원가입
    - 이메일/이름/전화번호/비밀번호/비밀번호 확인
    - 비밀번호 규칙 체크(6자 이상, 확인 일치 여부)
    - 회원가입 성공 후 자동 로그인 및 홈 이동

---

### 4.11 News 목록/상세 (`/news`, `/news/:id`)

- **목표**
  - 티켓팅/이벤트 관련 공지 및 소식을 전달하는 게시판 역할

- **구성 – 목록**
  - 상단 히어로 영역(로고 + "TIKETI News" 타이틀)
  - "글쓰기" 버튼 (로그인 사용자 대상)
  - 글쓰기 폼(토글)
    - 제목/내용 입력
    - 관리자일 경우 "공지사항으로 등록(상단 고정)" 체크박스
  - 리스트
    - 헤더: 제목/작성자/작성일/조회수
    - 상단 고정(공지) 글은 별도 뱃지 + 스타일

- **구성 – 상세**
  - 제목
  - 작성자/작성일/조회수 메타 정보
  - 본문(줄바꿈 유지)
  - 하단 버튼
    - "목록" 버튼
    - 작성자 본인 → "수정" 토글, 수정 폼
    - 작성자 또는 관리자 → "삭제" 버튼

---

### 4.12 관리자 대시보드 / 이벤트 / 예매 관리

- **관리자 대시보드 (`/admin`, `Dashboard`)**
  - 통계 카드 4개(전체 이벤트, 전체 예매, 총 매출, 오늘 예매)
  - 최근 예매 테이블
    - 예매 번호/이벤트명/사용자 정보/금액/상태/예매일
  - 상단 버튼
    - "이벤트 관리", "예매 관리"

- **이벤트 관리 (`/admin/events`, `Events`)**
  - 상단: "이벤트 관리" 타이틀 + "새 이벤트 만들기" 버튼
  - 상태 필터 탭(전체/판매 중/오픈 예정/종료/매진/취소)
  - 이벤트 카드 그리드
    - 제목/장소/일시/아티스트
    - 상태 뱃지
    - "수정" / "삭제" 버튼
  - 빈 상태
    - 상태별 안내 문구 + 새 이벤트 만들기 버튼(전체필터인 경우)

- **이벤트 생성/수정 (`/admin/events/new`, `/admin/events/edit/:id`, `EventForm`)**
  - 기본 정보 섹션
    - 제목/설명/장소/주소/공연 일시/판매 기간/아티스트
  - 좌석/티켓 설정 섹션
    - “좌석 선택 사용” 토글
    - 사용 시: 좌석 레이아웃 셀렉트 + 선택 레이아웃 미리보기
    - 미사용 시: 티켓 타입(이름/가격/총 수량/설명) 반복 폼
  - 포스터 이미지 섹션
    - 현재 포스터 이미지 미리보기
    - 파일 업로드 → 백엔드 이미지 업로드 API 연동
  - 하단 액션
    - "뒤로가기"
    - (수정 모드 + 미취소 상태) "이벤트 취소"
    - "저장" (생성 또는 수정)

- **예매 관리 (`/admin/reservations`, `Reservations`)**
  - 상단: "예매 관리" 타이틀 + 상태 필터 버튼(전체/대기/확정/취소)
  - 테이블
    - 예매 번호/이벤트/사용자/장소/공연 일시/금액/예매 상태/결제 상태/예매일
  - 각 상태는 색상 뱃지로 표시

---

## 5. 공통 컴포넌트 & 상태 규칙

- **공통 컴포넌트**
  - `Header`: 전역 네비게이션, 검색, 인증 상태
  - `EventCard`: 이벤트 카드 + 카운트다운
  - `WaitingRoomModal`: 대기열 UI
  - `ConnectionStatus`: WebSocket 연결 상태 표시

- **상태 규칙**
  - 로딩: 스피너 또는 "불러오는 중..." 텍스트
  - 빈 상태: 아이콘 + 설명 + 다음 행동 버튼
  - 에러: 상단 alert 또는 모달 형태로 표시, 재시도 버튼 고려
  - WebSocket 연결:
    - 연결 정상: 배너 숨김
    - 재연결/끊김: 상단에 상태 배너 노출

---

## 6. MVP 범위 정리

- **MVP에 포함되는 화면/기능**
  - 회원가입/로그인/로그아웃
  - 홈/검색/이벤트 상세(비좌석/좌석형)
  - 좌석 선택 + 예약 + 결제(Mock)
  - 나의 예매 목록/상세/취소
  - News 목록/상세/작성/수정/삭제
  - 대기열 모달(혼잡 이벤트)
  - 관리자: 대시보드/이벤트 관리/이벤트 생성·수정·취소/예매 관리

- **MVP 이후 확장 아이디어**
  - 실제 PG 연동(카카오페이, 네이버페이 등)
  - 모바일 전용 레이아웃/반응형 최적화
  - 다국어 지원 (ko/en)
  - 상세 통계/리포트 화면 (매출 추이, 시간대별 접속 수 등)
  - 알림(메일/SMS/푸시) 연동

