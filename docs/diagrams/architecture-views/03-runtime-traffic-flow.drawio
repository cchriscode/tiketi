<mxfile host="app.diagrams.net"><diagram name="03) Request/Traffic Flow (Runtime Data Plane)" id="03-request-traffic-flow-runtime-data-plane"><mxGraphModel dx="2000" dy="1200" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="1200" math="0" shadow="0"><root><mxCell id="0" /><mxCell id="1" parent="0" /><mxCell id="v-2" value="Tiketi - Request / Traffic Flow (Runtime Data Plane)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;;fontSize=24;fontStyle=1" vertex="1" parent="1"><mxGeometry x="600" y="20" width="800" height="40" as="geometry" /></mxCell><mxCell id="v-3" value="Global Edge" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#666666;dashed=1;" vertex="1" parent="1"><mxGeometry x="60" y="120" width="1880" height="260" as="geometry" /></mxCell><mxCell id="v-4" value="Regional (ap-northeast-2)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#666666;dashed=1;" vertex="1" parent="1"><mxGeometry x="60" y="410" width="1880" height="720" as="geometry" /></mxCell><mxCell id="v-5" value="Users" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#232F3D;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.users;spacingLeft=30;fontFamily=Helvetica;" vertex="1" parent="1"><mxGeometry x="100" y="180" width="70" height="70" as="geometry" /></mxCell><mxCell id="v-6" value="Route53" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#8C4FFF;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.route_53;" vertex="1" parent="1"><mxGeometry x="220" y="180" width="78" height="78" as="geometry" /></mxCell><mxCell id="v-7" value="CloudFront" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#8C4FFF;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.cloudfront;" vertex="1" parent="1"><mxGeometry x="380" y="180" width="78" height="78" as="geometry" /></mxCell><mxCell id="v-8" value="S3&#10;Static" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#7AA116;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.s3;" vertex="1" parent="1"><mxGeometry x="560" y="180" width="78" height="78" as="geometry" /></mxCell><mxCell id="v-9" value="ALB" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#8C4FFF;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.application_load_balancer;spacingLeft=0;fontFamily=Helvetica;" vertex="1" parent="1"><mxGeometry x="560" y="470" width="78" height="78" as="geometry" /></mxCell><mxCell id="v-10" value="EKS&#10;Ingress-&gt;Service-&gt;Pods" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_ec2_instance_contents;strokeColor=#D86613;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#000000;dashed=0;" vertex="1" parent="1"><mxGeometry x="760" y="440" width="520" height="320" as="geometry" /></mxCell><mxCell id="v-11" value="Backend Pods" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EFF6FF;strokeColor=#147EBA;" vertex="1" parent="1"><mxGeometry x="920" y="520" width="200" height="70" as="geometry" /></mxCell><mxCell id="v-12" value="ElastiCache" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#C925D1;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.elasticache;" vertex="1" parent="1"><mxGeometry x="1340" y="470" width="78" height="78" as="geometry" /></mxCell><mxCell id="v-13" value="RDS Proxy" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#C925D1;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.rds;" vertex="1" parent="1"><mxGeometry x="1460" y="470" width="78" height="78" as="geometry" /></mxCell><mxCell id="v-14" value="RDS" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#C925D1;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.rds;" vertex="1" parent="1"><mxGeometry x="1600" y="470" width="78" height="78" as="geometry" /></mxCell><mxCell id="v-15" value="Prometheus" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE7F3;strokeColor=#BC1356;" vertex="1" parent="1"><mxGeometry x="1340" y="640" width="160" height="60" as="geometry" /></mxCell><mxCell id="v-16" value="Grafana" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE7F3;strokeColor=#BC1356;" vertex="1" parent="1"><mxGeometry x="1520" y="640" width="160" height="60" as="geometry" /></mxCell><mxCell id="v-17" value="Loki" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE7F3;strokeColor=#BC1356;" vertex="1" parent="1"><mxGeometry x="1340" y="730" width="160" height="60" as="geometry" /></mxCell><mxCell id="e-18" value="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="v-5" target="v-6"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e-19" value="2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="v-6" target="v-7"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e-20" value="3a: static" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="v-7" target="v-8"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e-21" value="3b: /api/*" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="v-7" target="v-9"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e-22" value="4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="v-9" target="v-11"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e-23" value="5a" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;;dashed=1" edge="1" parent="1" source="v-11" target="v-12"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e-24" value="5b" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;;dashed=1" edge="1" parent="1" source="v-11" target="v-13"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e-25" value="5c" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="v-13" target="v-14"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e-26" value="/metrics" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;;dashed=1" edge="1" parent="1" source="v-11" target="v-15"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e-27" value="query" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="v-15" target="v-16"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e-28" value="logs" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;;dashed=1" edge="1" parent="1" source="v-11" target="v-17"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e-29" value="query" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="v-17" target="v-16"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="v-30" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;dashed=1;" vertex="1" parent="1"><mxGeometry x="90" y="900" width="620" height="220" as="geometry" /></mxCell><mxCell id="v-31" value="Legend" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;;fontSize=14;fontStyle=1" vertex="1" parent="1"><mxGeometry x="90" y="906" width="620" height="24" as="geometry" /></mxCell><mxCell id="v-32" value="&lt;div style='text-align:left;font-size:11px;line-height:1.3'&gt;Numbered edges show request sequence&lt;br&gt;/api/* is separate origin behavior&lt;br&gt;Docs:&lt;br&gt;- https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-restricting-access-to-s3.html&lt;br&gt;- https://docs.aws.amazon.com/eks/latest/userguide/alb-ingress.html&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1"><mxGeometry x="100" y="934" width="600" height="176" as="geometry" /></mxCell></root></mxGraphModel></diagram></mxfile>