# TIKETI MSA ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ - ì „ì²´ ìš”ì•½ (K3s â†’ EKS)

> **ì‘ì„±ì¼:** 2025-12-03
> **í”„ë¡œì íŠ¸:** TIKETI - ì‹¤ì‹œê°„ í‹°ì¼“íŒ… í”Œë«í¼
> **ê²½ë¡œ:** í˜„ì¬ ë‹¨ì¼ EC2 â†’ K3s (ê²½ëŸ‰ Kubernetes) â†’ EKS (AWS ê´€ë¦¬í˜• K8s)
> **ëª©í‘œ:** ìˆ˜ì‹­ë§Œ ë™ì‹œ ì ‘ì†ì ì²˜ë¦¬ ê°€ëŠ¥í•œ MSA ì•„í‚¤í…ì²˜

---

## ğŸ“š ë¬¸ì„œ êµ¬ì„±

1. **Part 1: ì„œë¹„ìŠ¤ ë„ë©”ì¸ ì„¤ê³„** (`MSA-Migration-Part1-Service-Domain-Design.md`)
   - í˜„ì¬ ëª¨ë†€ë¦¬ì‹ ë¬¸ì œì  ë¶„ì„
   - MSA ì „í™˜ ì´ìœ  (ì‹¤ì œ í‹°ì¼“íŒ… ì‚¬ì´íŠ¸ ë²¤ì¹˜ë§ˆí¬)
   - 6ê°œ í•µì‹¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì„¤ê³„

2. **Part 2: K3s â†’ EKS ì•„í‚¤í…ì²˜** (`MSA-Migration-Part2-AWS-Architecture-K3s-to-EKS.md`)
   - 3ë‹¨ê³„ ì „í™˜ ì „ëµ (í˜„ì¬ EC2 â†’ K3s â†’ EKS)
   - K3së¥¼ ì¤‘ê°„ ë‹¨ê³„ë¡œ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
   - RDS Aurora, ElastiCache ì„¤ì •
   - K3s ì„¤ì¹˜ ë° EKS ë§ˆì´ê·¸ë ˆì´ì…˜

3. **Part 3: ë‹¨ê³„ë³„ ì‹¤í–‰ ê°€ì´ë“œ** (`MSA-Migration-Part3-K3s-to-EKS-Step-by-Step.md`)
   - K3sì— ì„œë¹„ìŠ¤ ë°°í¬ (ì‹¤ì œ YAML)
   - Deployment, Service, HPA, Ingress ì„¤ì •
   - EKS ë§ˆì´ê·¸ë ˆì´ì…˜ ì ˆì°¨
   - íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

4. **ì´ ë¬¸ì„œ (Summary):** í•µì‹¬ ë‚´ìš© ìš”ì•½ ë° ë¹ ë¥¸ ì°¸ì¡°

---

## ğŸ¯ í•µì‹¬ ìš”ì•½

### ì™œ K3s â†’ EKS ê²½ë¡œì¸ê°€?

#### **í˜„ì¬ í™˜ê²½:**
```
ë‹¨ì¼ EC2 (t3.large)
â”œâ”€ Node.js Backend (ëª¨ë†€ë¦¬ìŠ¤)
â”œâ”€ Docker PostgreSQL
â””â”€ Docker DragonflyDB

S3
â””â”€ React ì •ì  íŒŒì¼
```

#### **ë¬¸ì œ:**
- âŒ í™•ì¥ ë¶ˆê°€ (EC2 1ëŒ€ í•œê³„)
- âŒ ë‹¨ì¼ ì¥ì• ì  (SPOF)
- âŒ ìˆ˜ë™ ë°°í¬ (ë‹¤ìš´íƒ€ì„ ë°œìƒ)

---

#### **ê¸°ì¡´ ê³„íš (ECS Fargate)ì˜ ë¬¸ì œ:**

```
ë‹¨ì¼ EC2 â†’ ECS Fargate â†’ (ë‚˜ì¤‘ì— í•„ìš”í•˜ë©´) EKS

ë¬¸ì œ:
1. ECS Task Definition (ECS ì „ìš©) ì‘ì„±
2. ë‚˜ì¤‘ì— EKSë¡œ ì „í™˜ ì‹œ ëª¨ë‘ ì¬ì‘ì„± (Kubernetes YAML)
3. ì¤‘ë³µ í•™ìŠµ (ECS + Kubernetes)
4. ë¹„ìš© ë¹„íš¨ìœ¨ (ì´ˆê¸° ECS Fargate ë¹„ìŒˆ)
```

---

#### **ê°œì„ ëœ ê³„íš (K3s â†’ EKS)ì˜ ì¥ì :**

```
ë‹¨ì¼ EC2 â†’ K3s â†’ EKS

ì¥ì :
âœ… K3sëŠ” ì‹¤ì œ Kubernetes (EKSì™€ 100% í˜¸í™˜)
âœ… í•œ ë²ˆ ì‘ì„±í•œ YAMLì„ EKSì—ì„œ ê·¸ëŒ€ë¡œ ì‚¬ìš©
âœ… ë¡œì»¬ ê°œë°œ í™˜ê²½ë„ K3së¡œ í†µì¼
âœ… ì´ˆê¸° ë¹„ìš© ì ˆê° ($1,700/ì›” â†’ $120/ì›”, 85% ì ˆê°)
âœ… ì ì§„ì  í•™ìŠµ (Kubernetes ê°œë… ë‹¨ê³„ì  ìŠµë“)
```

---

### 3ë‹¨ê³„ ë§ˆì´ê·¸ë ˆì´ì…˜ ê²½ë¡œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stage 0: í˜„ì¬ (ë‹¨ì¼ EC2)                             â”‚
â”‚ â€¢ Backend: ëª¨ë†€ë¦¬ìŠ¤                                 â”‚
â”‚ â€¢ DB: Docker PostgreSQL                             â”‚
â”‚ â€¢ Cache: Docker DragonflyDB                         â”‚
â”‚ ë¹„ìš©: $100/ì›” (EC2 t3.large)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ 2-3ì£¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stage 1: AWS ê´€ë¦¬í˜• ì„œë¹„ìŠ¤                           â”‚
â”‚ â€¢ Backend: ëª¨ë†€ë¦¬ìŠ¤ (ê·¸ëŒ€ë¡œ)                        â”‚
â”‚ â€¢ DB: RDS Aurora PostgreSQL âœ…                      â”‚
â”‚ â€¢ Cache: ElastiCache Redis âœ…                       â”‚
â”‚ ë¹„ìš©: $100 (EC2) + $150 (RDS) + $50 (Redis) = $300 â”‚
â”‚                                                     â”‚
â”‚ ëª©ì : ë°ì´í„° ë ˆì´ì–´ ì•ˆì •í™”, ë°±ì—…/ë³µêµ¬ ìë™í™”        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ 6-8ì£¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stage 2: K3s (ê²½ëŸ‰ Kubernetes) - í•µì‹¬ ğŸ”¥            â”‚
â”‚ â€¢ Backend: MSA (6ê°œ ì„œë¹„ìŠ¤)                         â”‚
â”‚   - Auth, Event, Queue, Reservation, Payment       â”‚
â”‚ â€¢ ì»¨í…Œì´ë„ˆ: Kubernetes Pod                          â”‚
â”‚ â€¢ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜: K3s (ë‹¨ì¼ EC2)                    â”‚
â”‚ â€¢ DB: RDS Aurora (ë™ì¼)                             â”‚
â”‚ â€¢ Cache: ElastiCache (ë™ì¼)                         â”‚
â”‚ ë¹„ìš©: $120 (EC2 t3.xlarge) + $200 (RDS+Redis) = $320â”‚
â”‚                                                     â”‚
â”‚ ëª©ì :                                               â”‚
â”‚ - Kubernetes í•™ìŠµ                                   â”‚
â”‚ - MSA ì „í™˜                                          â”‚
â”‚ - YAML ì¬ì‚¬ìš© ì¤€ë¹„ (EKS í˜¸í™˜)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ 2-3ì£¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stage 3: EKS (AWS ê´€ë¦¬í˜• Kubernetes) - ìµœì¢… ëª©í‘œ    â”‚
â”‚ â€¢ Backend: MSA (ë™ì¼)                               â”‚
â”‚ â€¢ ì»¨í…Œì´ë„ˆ: Kubernetes Pod (ë™ì¼)                   â”‚
â”‚ â€¢ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜: EKS Control Plane (AWS ê´€ë¦¬) âœ…   â”‚
â”‚ â€¢ Worker Nodes: Auto Scaling (3-50ëŒ€)               â”‚
â”‚ â€¢ DB: RDS Aurora (ë™ì¼)                             â”‚
â”‚ â€¢ Cache: ElastiCache (ë™ì¼)                         â”‚
â”‚ ë¹„ìš©: $432 (EKS+EC2) + $200 (RDS+Redis) = $632      â”‚
â”‚                                                     â”‚
â”‚ ë¹„ìš© ì¶”ê°€ $312/ì›”ì´ì§€ë§Œ:                            â”‚
â”‚ âœ… ê³ ê°€ìš©ì„± (Multi-AZ Control Plane)                â”‚
â”‚ âœ… ìë™ ìŠ¤ì¼€ì¼ë§ (50-100ë§Œ ë™ì‹œ ì ‘ì† ëŒ€ì‘)          â”‚
â”‚ âœ… ìš´ì˜ ìë™í™” (AWS ê´€ë¦¬)                           â”‚
â”‚ âœ… Spot Instanceë¡œ ë¹„ìš© 70% ì ˆê° ê°€ëŠ¥               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“… ì „ì²´ íƒ€ì„ë¼ì¸ (10ì£¼, ì•½ 2.5ê°œì›”)

| Week | Phase | ì‘ì—… | ì™„ë£Œ ê¸°ì¤€ |
|------|-------|------|----------|
| **1-2** | Stage 0 â†’ 1 | RDS Aurora, ElastiCache ë§ˆì´ê·¸ë ˆì´ì…˜ | Health Check OK |
| **3** | Stage 1 â†’ 2 | K3s ì„¤ì¹˜ + Auth Service ë°°í¬ | Pod ì •ìƒ ë™ì‘ |
| **4** | Stage 2 | Event Service ë°°í¬ | API ì‘ë‹µ ì •ìƒ |
| **5** | Stage 2 | Queue Service ë°°í¬ (WebSocket) | ì‹¤ì‹œê°„ ì—°ê²° OK |
| **6-7** | Stage 2 | Reservation + Payment Service ë°°í¬ | ì˜ˆë§¤ ì„±ê³µ |
| **8** | Stage 2 ì•ˆì •í™” | K3s ë¶€í•˜ í…ŒìŠ¤íŠ¸, ëª¨ë‹ˆí„°ë§ | 10K TPS ì²˜ë¦¬ |
| **9** | Stage 2 â†’ 3 | EKS í´ëŸ¬ìŠ¤í„° ìƒì„±, YAML ì´ì „ | EKS Pod ì •ìƒ |
| **10** | Stage 3 | EKSë¡œ íŠ¸ë˜í”½ ì „í™˜, K3s ì¢…ë£Œ | 100% EKS ì „í™˜ |
| **11+** | ìµœì í™” | HPA íŠœë‹, Spot Instance, Service Mesh | SLA 99.99% |

---

## ğŸ—ï¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ êµ¬ì¡° (6ê°œ)

```
                 Ingress (Nginx)
                       â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â†“               â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Auth Service  â”‚ â”‚Event Service â”‚ â”‚Queue Service â”‚
â”‚Port: 3010    â”‚ â”‚Port: 3011    â”‚ â”‚Port: 3012    â”‚
â”‚              â”‚ â”‚              â”‚ â”‚              â”‚
â”‚â€¢ JWT ë°œê¸‰    â”‚ â”‚â€¢ ì´ë²¤íŠ¸ ì¡°íšŒ â”‚ â”‚â€¢ ëŒ€ê¸°ì—´      â”‚
â”‚â€¢ ì‚¬ìš©ì ì¸ì¦ â”‚ â”‚â€¢ ì¢Œì„ ë°°ì¹˜ë„ â”‚ â”‚â€¢ WebSocket   â”‚
â”‚              â”‚ â”‚â€¢ ìºì‹± (Redis)â”‚ â”‚              â”‚
â”‚Replica: 2-10 â”‚ â”‚Replica: 2-20 â”‚ â”‚Replica: 3-100â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“               â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Reservation   â”‚ â”‚Payment       â”‚ â”‚(ëª¨ë‘ K8s Pod)â”‚
â”‚Service       â”‚ â”‚Service       â”‚ â”‚              â”‚
â”‚Port: 3013    â”‚ â”‚Port: 3014    â”‚ â”‚HPA ìë™í™•ì¥  â”‚
â”‚              â”‚ â”‚              â”‚ â”‚              â”‚
â”‚â€¢ ì˜ˆë§¤ ìƒì„±   â”‚ â”‚â€¢ ê²°ì œ ì²˜ë¦¬   â”‚ â”‚Liveness/     â”‚
â”‚â€¢ ì¢Œì„ ë½     â”‚ â”‚â€¢ Circuit     â”‚ â”‚Readiness     â”‚
â”‚â€¢ Saga Patternâ”‚ â”‚  Breaker     â”‚ â”‚Probe         â”‚
â”‚              â”‚ â”‚              â”‚ â”‚              â”‚
â”‚Replica: 3-50 â”‚ â”‚Replica: 2-10 â”‚ â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚               â”‚               â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚   RDS Aurora + ElastiCache    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’° ë¹„ìš© ë¶„ì„

### Stageë³„ ì›” ë¹„ìš©

```
Stage 0 (í˜„ì¬):
â€¢ EC2 t3.large: $100
ì´: $100/ì›”

Stage 1 (AWS ê´€ë¦¬í˜• DB):
â€¢ EC2 t3.large: $100
â€¢ RDS Aurora (db.t4g.medium Writer + Reader): $150
â€¢ ElastiCache (cache.t4g.micro Ã— 2): $50
ì´: $300/ì›” (+$200)

Stage 2 (K3s):
â€¢ EC2 t3.xlarge (K3s Master+Worker): $120
â€¢ RDS Aurora: $150
â€¢ ElastiCache: $50
ì´: $320/ì›” (+$20, ê±°ì˜ ë™ì¼)

Stage 3 (EKS):
â€¢ EKS Control Plane: $72
â€¢ Worker Nodes (t3.xlarge Ã— 3, On-Demand): $360
â€¢ RDS Aurora: $150
â€¢ ElastiCache: $50
ì´: $632/ì›” (+$312)
```

### ëŒ€ê·œëª¨ í™•ì¥ ì‹œ (í”¼í¬, í‹°ì¼“ ì˜¤í”ˆ)

```
Stage 2 (K3s) - í•œê³„:
â€¢ EC2 t3.xlarge 1ëŒ€ë¡œëŠ” 10ë§Œ ë™ì‹œ ì ‘ì† í•œê³„
â€¢ Worker Node ìˆ˜ë™ ì¶”ê°€ í•„ìš” (ì‹œê°„ ì†Œìš”)
ì´: $320 ~ $500/ì›” (Worker 2-3ëŒ€ ì¶”ê°€)

Stage 3 (EKS) - ë¬´ì œí•œ í™•ì¥:
â€¢ Auto Scaling: 3 â†’ 50ëŒ€ ìë™ í™•ì¥
â€¢ Spot Instance í™œìš©: 70% í• ì¸ ğŸ”¥
  - On-Demand: $0.1664/h
  - Spot: $0.050/h (70% í• ì¸)
â€¢ í”¼í¬ 10ì‹œê°„:
  - On-Demand: $360/ì›”
  - Spot 40ëŒ€ ì¶”ê°€: $20 (10h Ã— $0.050 Ã— 40)
ì´: $632 (í‰ì†Œ) + $20 (í”¼í¬) = $652/ì›”

100ë§Œ ë™ì‹œ ì ‘ì† ê°€ëŠ¥ âœ…
```

---

## ğŸ¯ K3s vs EKS ì„ íƒ ê°€ì´ë“œ

### K3së¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° (ì´ˆê¸° 6ê°œì›”)

```
âœ… Kubernetes í•™ìŠµ ì¤‘
âœ… íŠ¸ë˜í”½ < 10ë§Œ ë™ì‹œ ì ‘ì†
âœ… ë¹„ìš© ìµœì†Œí™” í•„ìš” ($320/ì›”)
âœ… ìˆ˜ë™ ê´€ë¦¬ ê°€ëŠ¥
âœ… ë‹¨ì¼ ë¦¬ì „ë§Œ ì‚¬ìš©

ì£¼ì˜:
âš ï¸ ë‹¨ì¼ Master (ê³ ê°€ìš©ì„± X)
âš ï¸ ìˆ˜ë™ ìŠ¤ì¼€ì¼ë§
âš ï¸ ì§ì ‘ ì—…ê·¸ë ˆì´ë“œ í•„ìš”
```

### EKSë¡œ ì „í™˜í•˜ëŠ” ê²½ìš° (6ê°œì›” í›„)

```
âœ… íŠ¸ë˜í”½ > 10ë§Œ ë™ì‹œ ì ‘ì†
âœ… ê³ ê°€ìš©ì„± í•„ìš” (99.99%)
âœ… ìë™ ìŠ¤ì¼€ì¼ë§ í•„ìš”
âœ… ìš´ì˜ ìë™í™” ì›í•¨
âœ… Multi-AZ ë°°í¬

ì¥ì :
âœ… AWS ê´€ë¦¬ (ìë™ íŒ¨ì¹˜, ë°±ì—…)
âœ… Auto Scaling (ì´ˆë‹¨ìœ„ í™•ì¥)
âœ… Spot Instance (70% í• ì¸)
âœ… Multi-AZ Control Plane
```

---

## ğŸ”¥ í•µì‹¬ í¬ì¸íŠ¸

### 1. K3sëŠ” "ì§„ì§œ" Kubernetes

```yaml
# K3sì—ì„œ ì‘ì„±í•œ YAML
apiVersion: apps/v1
kind: Deployment
metadata:
  name: auth-service
spec:
  replicas: 2
  template:
    spec:
      containers:
      - name: auth-service
        image: tiketi/auth-service:latest
        ports:
        - containerPort: 3010

# â†“ EKSì— ê·¸ëŒ€ë¡œ ë³µì‚¬-ë¶™ì—¬ë„£ê¸° âœ…
# kubectl apply -f deployment.yaml
```

**ECS Fargateì˜€ë‹¤ë©´:**
```json
// ECS Task Definition (ECS ì „ìš©)
{
  "family": "auth-service",
  "containerDefinitions": [...]
}

// â†“ EKS ì „í™˜ ì‹œ ëª¨ë‘ ë²„ë¦¬ê³  YAMLë¡œ ì¬ì‘ì„± âŒ
```

---

### 2. Kubernetes í•™ìŠµ ê³¡ì„  ì™„í™”

```
Step 1: ë¡œì»¬ ê°œë°œ (K3d, Docker Desktop K8s)
        â””â”€ deployment.yaml ì‘ì„±
        â””â”€ kubectl apply ì—°ìŠµ

Step 2: K3s (ë‹¨ì¼ EC2)
        â””â”€ ë™ì¼í•œ deployment.yaml ë°°í¬
        â””â”€ kubectl ëª…ë ¹ì–´ ì‹¤ìŠµ

Step 3: EKS (í”„ë¡œë•ì…˜)
        â””â”€ ë™ì¼í•œ deployment.yaml ì‚¬ìš©
        â””â”€ kubectl ëª…ë ¹ì–´ ë™ì¼

â†’ ê°œë°œ/ìŠ¤í…Œì´ì§•/í”„ë¡œë•ì…˜ í™˜ê²½ ì¼ì¹˜ âœ…
```

---

### 3. ë¹„ìš© íš¨ìœ¨ì„±

```
ì´ˆê¸° 6ê°œì›” (K3s):
â€¢ EC2 1ëŒ€ë¡œ ì¶©ë¶„
â€¢ ì›” $320
â€¢ í•™ìŠµ + MVP ê²€ì¦

6ê°œì›” í›„ (EKS ì „í™˜ ê²°ì •):
â€¢ íŠ¸ë˜í”½ í™•ì¸ë¨
â€¢ ë¹„ìš© íˆ¬ì ê°€ì¹˜ ìˆìŒ ($632/ì›”)
â€¢ Spot Instanceë¡œ ì¶”ê°€ ì ˆê°

vs ECS Fargate (ì²˜ìŒë¶€í„°):
â€¢ ì´ˆê¸°ë¶€í„° $1,700/ì›”
â€¢ 6ê°œì›” = $10,200
â€¢ K3s ì‚¬ìš© ì‹œ = $1,920
â€¢ ì°¨ì•¡: $8,280 ì ˆê° ğŸ”¥
```

---

### 4. YAML ì¬ì‚¬ìš©ì„±

```
ì‘ì„± 1íšŒ, ì‚¬ìš© 3ê³³:

1. ë¡œì»¬ ê°œë°œ (K3d)
2. K3s (ë‹¨ì¼ EC2)
3. EKS (í”„ë¡œë•ì…˜)

â†’ í•™ìŠµ íˆ¬ìê°€ ê³§ë°”ë¡œ í”„ë¡œë•ì…˜ì— í™œìš© âœ…
```

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### Stage 1 ì™„ë£Œ ê¸°ì¤€
- [ ] RDS Aurora Writer + Reader ì •ìƒ ë™ì‘
- [ ] ElastiCache Redis ì—°ê²° ì„±ê³µ
- [ ] Applicationì´ RDS/Redis ì •ìƒ ì‚¬ìš©
- [ ] ìë™ ë°±ì—… ì„¤ì • ì™„ë£Œ (7ì¼)
- [ ] CloudWatch ì•Œë¦¼ ì„¤ì •

### Stage 2 ì™„ë£Œ ê¸°ì¤€ (K3s)
- [ ] K3s í´ëŸ¬ìŠ¤í„° ì„¤ì¹˜ ì™„ë£Œ
- [ ] 6ê°œ ì„œë¹„ìŠ¤ ëª¨ë‘ Podë¡œ ì‹¤í–‰
- [ ] HPA ë™ì‘ í™•ì¸ (CPU 70% â†’ ìë™ í™•ì¥)
- [ ] Ingressë¡œ ì™¸ë¶€ ì ‘ê·¼ ê°€ëŠ¥
- [ ] Prometheus + Grafana ëª¨ë‹ˆí„°ë§ êµ¬ì¶•
- [ ] ë¶€í•˜ í…ŒìŠ¤íŠ¸ 10K TPS í†µê³¼

### Stage 3 ì™„ë£Œ ê¸°ì¤€ (EKS)
- [ ] EKS í´ëŸ¬ìŠ¤í„° ìƒì„± ì™„ë£Œ
- [ ] K3s YAMLì„ EKSì— ë°°í¬ ì„±ê³µ
- [ ] Auto Scaling Group ì •ìƒ ë™ì‘
- [ ] ALB Ingress Controller ì„¤ì •
- [ ] CloudWatch Container Insights í™œì„±í™”
- [ ] íŠ¸ë˜í”½ 100% EKSë¡œ ì „í™˜
- [ ] K3s í´ëŸ¬ìŠ¤í„° ì¢…ë£Œ
- [ ] SLA 99.99% ë‹¬ì„±

---

## ğŸš€ ì¦‰ì‹œ ì‹œì‘ ê°€ì´ë“œ

### 1. ë¡œì»¬ì—ì„œ K3s ì²´í—˜ (5ë¶„)

```bash
# K3d ì„¤ì¹˜ (ë¡œì»¬ K3s)
curl -s https://raw.githubusercontent.com/k3d-io/k3d/main/install.sh | bash

# í´ëŸ¬ìŠ¤í„° ìƒì„±
k3d cluster create tiketi-local

# kubectl í™•ì¸
kubectl get nodes
# NAME                       STATUS   ROLES
# k3d-tiketi-local-server-0  Ready    control-plane,master

# ìƒ˜í”Œ ë°°í¬
kubectl create deployment nginx --image=nginx
kubectl expose deployment nginx --port=80 --type=LoadBalancer

# ì ‘ì†
curl http://localhost:80
```

---

### 2. EC2ì— K3s ì„¤ì¹˜ (10ë¶„)

```bash
# EC2 ì ‘ì†
ssh -i tiketi-key.pem ubuntu@{{ec2-ip}}

# K3s ì„¤ì¹˜ (ë‹¨ì¼ ëª…ë ¹ì–´)
curl -sfL https://get.k3s.io | sh -

# í™•ì¸
sudo kubectl get nodes
```

---

### 3. ì²« ì„œë¹„ìŠ¤ ë°°í¬ (30ë¶„)

```bash
# Namespace ìƒì„±
kubectl create namespace tiketi

# Auth Service ë°°í¬
kubectl apply -f k8s/auth-service/

# í™•ì¸
kubectl get pods -n tiketi
```

---

## ğŸ“š ì°¸ê³  ìë£Œ

### K3s ê³µì‹ ë¬¸ì„œ
- [K3s ê³µì‹ ì‚¬ì´íŠ¸](https://k3s.io/)
- [K3s GitHub](https://github.com/k3s-io/k3s)
- [Rancher Documentation](https://rancher.com/docs/k3s/latest/en/)

### EKS ê³µì‹ ë¬¸ì„œ
- [Amazon EKS User Guide](https://docs.aws.amazon.com/eks/latest/userguide/)
- [EKS Best Practices](https://aws.github.io/aws-eks-best-practices/)

### Kubernetes í•™ìŠµ
- [Kubernetes Basics](https://kubernetes.io/docs/tutorials/kubernetes-basics/)
- [kubectl Cheat Sheet](https://kubernetes.io/docs/reference/kubectl/cheatsheet/)

---

## ğŸ‰ ê²°ë¡ 

ì´ ê°€ì´ë“œëŠ” **í˜„ì¬ ë‹¨ì¼ EC2 í™˜ê²½ì—ì„œ ì¶œë°œ**í•˜ì—¬, **K3së¡œ Kubernetesë¥¼ í•™ìŠµí•˜ê³  MSAë¥¼ êµ¬í˜„**í•œ í›„, **EKSë¡œ ëŒ€ê·œëª¨ í™•ì¥**í•˜ëŠ” í˜„ì‹¤ì ì¸ ê²½ë¡œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### í•µì‹¬ ì„±ê³µ ìš”ì¸

1. **ì ì§„ì  ì „í™˜:** ë‹¨ê³„ë³„ë¡œ ì•ˆì •í™”í•˜ë©´ì„œ ì§„í–‰
2. **YAML ì¬ì‚¬ìš©:** í•œ ë²ˆ ì‘ì„±, ì—¬ëŸ¬ ê³³ì—ì„œ ì‚¬ìš©
3. **ë¹„ìš© íš¨ìœ¨:** ì´ˆê¸° $320/ì›”ë¡œ ì‹œì‘
4. **í•™ìŠµ íˆ¬ì:** Kubernetes ì—­ëŸ‰ = ì¥ê¸° ìì‚°

### ì˜ˆìƒ ê²°ê³¼

```
Stage 0 (í˜„ì¬):
- ê°€ìš©ì„±: 95% (ë‹¨ì¼ EC2)
- ì²˜ë¦¬ëŸ‰: 1,000 TPS (í•œê³„)
- ë¹„ìš©: $100/ì›”

Stage 2 (K3s í›„):
- ê°€ìš©ì„±: 99.9%
- ì²˜ë¦¬ëŸ‰: 10,000 TPS
- ë¹„ìš©: $320/ì›”

Stage 3 (EKS í›„):
- ê°€ìš©ì„±: 99.99% âœ…
- ì²˜ë¦¬ëŸ‰: 100,000 TPS âœ…
- ë¹„ìš©: $632/ì›” (Spotìœ¼ë¡œ $400/ì›”ê¹Œì§€ ì ˆê° ê°€ëŠ¥)
```

**ROI:** K3së¡œ 6ê°œì›” ê²€ì¦ í›„ EKS ì „í™˜ ì‹œ, ì´ íˆ¬ì ëŒ€ë¹„ 10ë°° í™•ì¥ì„± í™•ë³´

---

**ë¬¸ì˜ ë° ì§€ì›:**
- Part 1: ì„œë¹„ìŠ¤ ë„ë©”ì¸ ì„¤ê³„
- Part 2: K3s â†’ EKS ì•„í‚¤í…ì²˜
- Part 3: ë‹¨ê³„ë³„ ì‹¤í–‰ ê°€ì´ë“œ

**Good Luck! ğŸš€**