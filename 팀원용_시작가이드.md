# 🎫 TIKETI - 팀원용 시작 가이드

## 📥 1단계: 준비물

### Docker Desktop 설치 (필수!)
- **Windows/Mac**: [Docker Desktop 다운로드](https://www.docker.com/products/docker-desktop/)
- 설치 후 Docker Desktop 실행 확인

> ⚠️ Docker가 실행 중이어야 합니다!

---

## 🚀 2단계: 프로젝트 실행 (3분 완성)

### 1️⃣ 프로젝트 클론
```bash
git clone <저장소-주소>
cd "새 폴더 (2)"
```

### 2️⃣ 실행 (딱 한 줄!)
```bash
docker-compose up -d
```

### 3️⃣ 기다리기 (1-2분)
첫 실행 시 이미지 다운로드가 필요합니다.

```
✅ PostgreSQL 시작 중...
✅ DragonflyDB 시작 중...
✅ 백엔드 빌드 중...
✅ 프론트엔드 빌드 중...
```

### 4️⃣ 완료! 접속하기
**프론트엔드**: http://localhost:3000

---

## 👤 3단계: 로그인

### 관리자 계정
```
이메일: admin@tiketi.gg
비밀번호: admin123
```

### 일반 사용자 계정
- 회원가입 페이지에서 직접 만들기
- 또는 각자 테스트용 계정 생성

---

## 🎯 주요 기능 테스트

### 일반 사용자로 해보기
1. **이벤트 보기**: 메인 페이지에 3개 샘플 이벤트 있음
2. **티켓 예매**: 이벤트 클릭 → 티켓 선택 → 수량 조절 → 예매하기
3. **내 예매 확인**: 상단 "내 예매" 메뉴
4. **예매 취소**: 예매 상세 → "예매 취소" 버튼

### 관리자로 해보기
1. **대시보드**: 통계 확인
2. **이벤트 생성**: "이벤트 관리" → "+ 새 이벤트"
3. **예매 관리**: "예매 관리"에서 모든 예매 확인

---

## 🔍 확인 방법

### 잘 실행되고 있는지 확인
```bash
docker-compose ps
```

이런 화면이 나오면 성공:
```
NAME                  STATUS
tiketi-postgres       Up
tiketi-dragonfly      Up
tiketi-backend        Up
tiketi-frontend       Up
```

### 로그 보기 (문제 발생 시)
```bash
# 모든 로그
docker-compose logs -f

# 백엔드만
docker-compose logs -f backend

# 프론트엔드만
docker-compose logs -f frontend
```

---

## 🛑 중지하기

### 작업 끝나면
```bash
docker-compose down
```

### 다음에 다시 시작
```bash
docker-compose up -d
```

---

## 🐛 문제 해결

### 포트가 이미 사용 중이라고 나옴
다른 프로그램이 3000, 3001, 5432, 6379 포트를 사용 중입니다.

**해결 방법**:
```bash
# Windows
netstat -ano | findstr :3000
netstat -ano | findstr :3001

# 해당 프로세스 종료하거나 Docker 재시작
```

### "Cannot connect to Docker daemon" 에러
Docker Desktop이 실행되지 않았습니다.
→ Docker Desktop 실행 후 다시 시도

### 데이터베이스 오류 / 이상한 동작
완전히 초기화하기:
```bash
docker-compose down -v
docker-compose up -d
```
> ⚠️ 주의: 모든 데이터가 삭제됩니다!

### 코드 수정했는데 반영 안 됨
```bash
docker-compose restart backend
# 또는
docker-compose restart frontend
```

---

## 💻 개발 모드 (선택사항)

Docker 없이 로컬에서 개발하려면:

### 백엔드
```bash
cd backend
npm install
npm run dev
```

### 프론트엔드
```bash
cd frontend
npm install
npm start
```

> 이 경우 PostgreSQL과 Redis는 Docker로 실행해야 합니다.

---

## 📁 프로젝트 구조 간단 설명

```
📦 프로젝트 루트
├── 📂 backend/           ← 백엔드 (Node.js)
│   ├── src/routes/      ← API 엔드포인트
│   └── src/config/      ← DB, Redis 설정
├── 📂 frontend/          ← 프론트엔드 (React)
│   ├── src/pages/       ← 페이지들
│   └── src/services/    ← API 호출
├── 📂 database/          ← DB 초기화 스크립트
└── docker-compose.yml   ← 전체 실행 설정
```

---

## 🎨 UI 구성

### 사용자 화면
- **홈** (`/`): 이벤트 목록
- **이벤트 상세** (`/events/:id`): 티켓 예매
- **내 예매** (`/my-reservations`): 예매 내역
- **로그인/회원가입** (`/login`, `/register`)

### 관리자 화면
- **대시보드** (`/admin`): 통계
- **이벤트 관리** (`/admin/events`): 이벤트 CRUD
- **예매 관리** (`/admin/reservations`): 예매 목록

---

## 🔑 기술 스택

- **프론트**: React 18
- **백엔드**: Node.js + Express
- **DB**: PostgreSQL 15
- **캐시**: DragonflyDB (Redis 호환)
- **인증**: JWT
- **배포**: Docker Compose

---

## 📚 더 자세한 문서

- `README.md` - 전체 프로젝트 설명
- `GETTING_STARTED.md` - 상세 시작 가이드
- `tiketi-architecture-analysis.md` - 아키텍처 분석

---

## 💡 팁

### 동시성 테스트
여러 브라우저 탭에서 동시에 같은 티켓 예매 시도 → 분산 락이 중복 방지!

### 데이터베이스 직접 확인
```bash
docker exec -it tiketi-postgres psql -U tiketi_user -d tiketi

# 이벤트 조회
SELECT * FROM events;

# 예매 조회
SELECT * FROM reservations;

# 종료
\q
```

### Redis 캐시 확인
```bash
docker exec -it tiketi-dragonfly redis-cli

# 모든 키 보기
KEYS *

# 특정 캐시 확인
GET events:on_sale:1:10

# 종료
exit
```

---

## ❓ 질문/이슈

문제가 생기면:
1. 로그 확인: `docker-compose logs -f`
2. 완전 초기화: `docker-compose down -v && docker-compose up -d`
3. 팀원에게 문의

---

## ✅ 체크리스트

프로젝트 실행 전:
- [ ] Docker Desktop 설치 및 실행
- [ ] Git 설치
- [ ] 포트 3000, 3001 비어있음

처음 실행:
- [ ] `docker-compose up -d` 실행
- [ ] http://localhost:3000 접속됨
- [ ] admin@tiketi.gg로 로그인 성공

---

**즐거운 개발 되세요! 🎉**

